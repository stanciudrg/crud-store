import { MongoClient } from "mongodb";
import dotenv from "dotenv";

// Get the hidden, personal connection string generated by MongoDB
dotenv.config();

const CONNECTION_STRING = process.env.CONNECTION_STRING;

let database = null;

// Database connection function
export async function connect() {
  if (database) return database;

  try {
    const client = await MongoClient.connect(CONNECTION_STRING);
    database = client.db();
    console.log("Successfully connected to database");
    return database;
  } catch (error) {
    console.error("Failed connecting do database:", error);
    throw error;
  }
}
